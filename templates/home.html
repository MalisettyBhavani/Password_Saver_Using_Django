<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.2/css/all.min.css"
        integrity="sha512-3M00D/rn8n+2ZVXBO9Hib0GKNpkm8MSUU/e2VNthDyBYxKWG+BftNYYcuEjXlyrSO637tidzMBXfE7sQm0INUg=="
        crossorigin="anonymous" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <link rel="stylesheet" href = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <title>Document</title>
    <style>
        .pwd {
            -webkit-text-security: disc;
        }
        .toggle{
            -webkit-text-security: none;
        }
    </style>
</head>
<body>
    <div class="container pt-3">
        {% csrf_token %}
        <div class="d-flex justify-content-between my-2">
            <h4>Welcome {{ user.username|capfirst }} </h4>
            <a href="{% url 'logout' %}" class="btn btn-warning btn-sm"> 
                <i class="fa fa-sign-out-alt"></i>
                <span>Logout</span>
            </a>
        </div>
        {% if details.values %}
        <div class="alert alert-info"> Here are the list of passwords which you have saved!</div>
                <table class="table">
                    <tr>
                        <th>Account Name </th>
                        <th>User Name </th>
                        <th> Password </th>
                        <th> Show Password </th>
                        <th> Update </th>
                        <th> Delete </th>
                    </tr>

                    {% for password_list in details %}
                    <tr>
                        <td>{{ password_list.account_name }}</td>
                        <td>{{ password_list.user_name }}</td>
                        <td class="pwd">{{ password_list.password }}</td>
                        <td style="text-align: center;" class="showPassword"><span class="fa fa-eye"></span></td>
                        <td> <a class="btn btn-dark btn-sm" href="{% url 'update' password_list.id %}"> Update </a></td>
                        
                        <td><a class="btn btn-danger btn-sm" href="{% url 'delete' password_list.id %}"> Delete </a></td></td>
                        {% endfor %}
                    </tr>
                </table>
            {% else %}
            <div class="alert alert-warning">You haven't stored any passwords!</div>
            {% endif %}
            <a href="{% url 'add_acc_details' %}" class="btn btn-primary btn-sm">Add</a>
            <!-- <a class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addModal">Add</a> -->

    </div>
    <script>
        $('.showPassword').on("click",function(){
            var pwd = $(this).prev("td")
            pwd[0].style["-webkit-text-security"]="none"
            setTimeout(hidepassword,3000,pwd)
        })
        function hidepassword(pwd)
        {
            pwd[0].style["-webkit-text-security"]="disc"
        }
        
        
    </script>
    
</body>
</html>